{% macro comments(article) %}
    {% if DUOSHUO_SHORTNAME  and SITEURL and article.status != 'draft' and article.template != 'page' %}
<section>
{% if article.comments_intro %}
<p id="comment-message">{{ article.comments_intro }} </p>
{% else %}
    {% from '_includes/_defaults.html' import COMMENTS_INTRO with context %}
    {%if COMMENTS_INTRO %}
    <p id="comment-message">{{ COMMENTS_INTRO }} </p>
    {% endif %}
{% endif %}
    <!-- Duoshuo Comment BEGIN -->
    <div class="ds-thread"></div>
    <script type="text/javascript">
        var duoshuoQuery = {short_name:"{{ DUOSHUO_SHORTNAME }}"};
			(function() {
 			var ds = document.createElement('script');
 		ds.type = 'text/javascript';ds.async = true;
 		ds.src = 'http://static.duoshuo.com/embed.js';
 		ds.charset = 'UTF-8';
 		(document.getElementsByTagName('head')[0]
  		|| document.getElementsByTagName('body')[0]).appendChild(ds);
 		})();
		</script>
<!-- Duoshuo Comment END -->
</section>
    {% endif %}
{% endmacro %}

{% macro comments_script(article) %}
    {% if DISQUS_SITENAME and SITEURL and article.status != 'draft' %}
        {% from '_includes/disqus_scripts.html' import disqus_misc_scripts with context %}
        {{ disqus_misc_scripts() }}
    {% endif %}
{% endmacro %}

